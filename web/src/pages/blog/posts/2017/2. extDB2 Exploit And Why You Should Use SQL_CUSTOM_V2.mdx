---
title: extDB2 Exploit And Why You Should Use SQL_CUSTOM_V2
description: |
    If you run a Life Server you probably use extDB2. It is a wonderfully
    optimized and amazingly useful plugin used for Database...
slug: extdb2-exploit-and-why-you-should-use-sql_custom_v2
---

# extDB2 Exploit And Why You Should Use SQL_CUSTOM_V2


If you run a Life Server you probably use [extDB2]. It is a wonderfully optimized
and amazingly useful plugin used for Database connectivity. The problem with many
life servers is they use SQL_RAW (mode 2), which take a string from SQF and executes
it in the mySQL database. This inherently opens a security vulnerability on the
majority of Life servers. 

I am going to walk you through one major vulnerability that the server could be open to. 

### The Requirements

In order for this exploit to be used, your server must be vulnerable to a remote
execution exploit. I've covered this topic before so I will not go into detail. 

Basically, cheaters would need to be able to execute SQF code on your server
through some exploit (be it `createUnit` or a more complicated `remoteExec` exploit)

### The exploit

The first part of this exploit requires the cheater to establish their own connection
to the extDB2 extension. The cheater would need to access your extDB2 sql id. Life
servers store this in the life_sql_id variable. The cheater would run something like this:

```sqf
DB_ID = (call life_sql_id);
```

Next the cheater would need to establish his own connection functions. 
Something like: 

```sqf
_request_noresponse = {
    _queryStmt = param[0, "", [""]];
    _mode = param[1, 1, [0]];
    _multiarr = param[2, false, [false]];

    "extDB2" callExtension format["%1:%2:%3", _mode, DB_ID, _queryStmt];
};

// TODO: convert image below to code
```

<img src="https://ss.lystic.zip/Legacy/Nb9ExTbw/WvfQMVnfsbNfqaeB.png" width="821" height="742" class="alignnone size-medium" />

Finally the cheater would choose which exploit he would want to run. Similar to these:

```sqf
// TODO: convert image below to code

// 1. Database Creation Spam

// 2. List all Databases

// 3. Delete all Databases
```

<img src="https://ss.lystic.zip/Legacy/oj1OufqS/y0FTTF1YOOzSMHRg.png" width="917" height="714" class="alignnone size-medium" />

This is only the beginning of the rabbit whole. If you share your mySQL database
with other important systems (think website), those could also be accessed. All
user data from players could be accessed, manipulated, and deleted. Bad stuff.

### The solutions

There are quite a few. I will be shilling for `SQL_CUSTOM_V2` which allows you to
only run pre-made SQL queries through extDB2, which solves this problem completely.

Another solution, however, is to edit the permissions of your mySQL user to only
be allowed to execute what you need it to in the database you need it to.

The thing with `SQL_CUSTOM_V2` is, this also prevents users from modifying the
player data. The SQL user would need to have permissions to do this, which is
why the second solution is imperfect. `SQL_CUSTOM_V2` is great; Altis Life already
has some [pre-made statements]. This, if setup properly, can prevent this entire
issue from effecting your server.

{/* reference links */}
[extDB2]: https://github.com/AsYetUntitled/
[pre-made statements]: https://github.com/ActimelPL/Altis-Life-PLC/blob/master/%40extDB2/extDB/sql_custom_v2/altis-life.ini